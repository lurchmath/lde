<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Phase 6, Labels - Lurch Deductive Engine Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Lurch Deductive Engine Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Design Plans <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../design-overview/">Overview</a>
</li>
                            
<li >
    <a href="../phase1-structures/">Phase 1, Structures</a>
</li>
                            
<li >
    <a href="../phase2-input-tree/">Phase 2, The Input Tree</a>
</li>
                            
<li >
    <a href="../phase3-output-tree/">Phase 3, The Output Tree</a>
</li>
                            
<li >
    <a href="../phase4-modification/">Phase 4, Modification</a>
</li>
                            
<li >
    <a href="../phase5-interpretation/">Phase 5, Interpretation</a>
</li>
                            
<li class="active">
    <a href="./">Phase 6, Labels</a>
</li>
                            
<li >
    <a href="../phase7-validation/">Phase 7, Validation</a>
</li>
                            
<li >
    <a href="../phase8-expressions-and-rules/">Phase 8, Expressions and Rules</a>
</li>
                            
<li >
    <a href="../enhancements/">Enhancements for Later</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../api-overview/">Overview</a>
</li>
                            
<li >
    <a href="../api-lde/">The LDE</a>
</li>
                            
<li >
    <a href="../api-structures/">Structures</a>
</li>
                            
<li >
    <a href="../api-input-structures/">Input Structures</a>
</li>
                            
<li >
    <a href="../api-output-structures/">Output Structures</a>
</li>
                            
<li >
    <a href="../api-phases/">Phases of processing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../phase5-interpretation/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../phase7-validation/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#lde-design-phase-6-labels">LDE Design Phase 6: Labels</a></li>
            <li><a href="#content">Content</a></li>
            <li><a href="#goal">Goal</a></li>
            <li><a href="#status">Status</a></li>
            <li><a href="#labeling-outputstructure-instances">Labeling OutputStructure instances</a></li>
            <li><a href="#citations">Citations</a></li>
            <li><a href="#lookup">Lookup</a></li>
            <li><a href="#api-documentation">API Documentation</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p>We have designed the work on the Lurch Deductive Engine (LDE) to progress in
phases.  The idea is that each phase ends with a completed whole that can be
tested in that state, and that provides more features than the previous
state did.  By the time the final phase is complete, the LDE will be a
robust and useful product.</p>
<h1 id="lde-design-phase-6-labels">LDE Design Phase 6: Labels</h1>
<h2 id="content">Content</h2>
<p>In this phase, we make it possible for <code>OutputStructure</code> instances to be
labeled.</p>
<h2 id="goal">Goal</h2>
<p>The LDE will be able to look up <code>OutputStructure</code> instances by the labels
attached to them, and we will have a convention for citing labels
established and implemented.</p>
<h2 id="status">Status</h2>
<p>This has not been implemented.  See the tasks below.</p>
<h2 id="labeling-outputstructure-instances">Labeling <code>OutputStructure</code> instances</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Create in the <code>OutputStructure</code> base class a function called
   <code>hasLabel(str)</code> that returns false always.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Create a function <code>addLabel(targets)</code> in the <code>InputStructure</code> class.
   It should accept an array of <code>OutputStructure</code> instances, and should loop
   through all of them, obeying the following conventions.<ul>
<li>If the <code>InputStructure</code> has an attribute with key "label regex", then
  place into the <code>OutputStructure</code>s a <code>hasLabel(str)</code> function that
  tests the given string against the given regular expression.</li>
<li>If the <code>InputStructure</code> has an attribute with key "label regex flags",
  then apply those to the regular expression object you create in the
  previous item.</li>
<li>If the <code>InputStructure</code> has an attribute with key "label targets",
  then call its value $V$ and apply the above techniques to only those
  targets whose indices are on the $V$, when $V$ is treated as an array.</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add documentation in that file describing the changes just made.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests for the <code>InputStructure</code> module to include some
   calls to this routine, passing it various example parameters and
   verifying that it does its job as specified.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend <code>recursiveInterpret()</code> so that it calls this function in an
   <code>InputStructure</code> as soon as it has completed <code>interpret()</code> on that
   structure, passing in the set of interpretation results.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests to ensure that this is now a part of the
   Interpretation Phase.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Once the unit tests pass, build everything and commit.</li>
</ul>
<h2 id="citations">Citations</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Create a stub function <code>copyCitations(targets)</code> in the
   <code>InputStructure</code> base class, but at first it should do nothing.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Establish a convention for use in the Input Tree for citing reasons
   and premises and document that convention above the stub function just
   created.  Possibilities include the following.<ul>
<li>An attribute with key "premise citations" indicates that its value is
  a list of premise citations by label (that should be looked up with
  the labels feature described above).  If its value is an array, it
  will be treated as an array of strings.  If its value is not an array,
  it will be converted to a string and treated as a one-element array
  containing that string.</li>
<li>An attribute with key "reason citations" behaves the same way, but
  with obviously different semantics.</li>
<li>A connection of type "premise citation" indicates that the source
  wants to cite the target as a premise.</li>
<li>A connection of type "reason citation" behaves the same way, but with
  obviously different semantics.</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled/> Implement the <code>copyCitations(targets)</code> function to copy all of the
   data indicated by those document conventions from the <code>InputStructure</code> in
   which it's called into all of the given targets, which will be an array
   of <code>OutputStructure</code> instances just created from the given
   <code>InputStructure</code>.<ul>
<li>Note that <code>X.copyCitations(targets)</code> should copy all citations that go
  to <em>or come from</em> nodes <code>Y</code> that are before (or equal to) <code>X</code> in the
  Input Tree.</li>
<li>It can make the connections in the Output Tree by looking up the last
  interpretation of such nodes <code>Y</code>.</li>
<li>If <code>X</code> has connections to or from nodes that appear after <code>X</code> in the
  tree, then those nodes will create the connections later, when
  recursive interpretation visits them.</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend <code>recursiveInterpret()</code> so that it calls this function in an
   <code>InputStructure</code> as soon as it has completed <code>interpret()</code> on that
   structure, passing in the set of interpretation results.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests to ensure that this is now a part of the
   Interpretation Phase.  Be sure to test connections that go both
   directions (forward and backward) in the Input Tree and ensure that they
   are both correctly copied to the Output Tree.  Ensure that no connection
   is copied redundantly.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Once the unit tests pass, build everything and commit.</li>
</ul>
<h2 id="lookup">Lookup</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Create a class method <code>lookup(string,accessibles)</code> in the
   <code>OutputStructure</code> class, which loops backwards through the list of
   <code>accessibles</code>, trying to find one that <code>hasLabel()</code> the given <code>string</code>.
   It returns the latest one found, or null if there is none.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Create an instance method <code>lookup(string)</code> in the <code>OutputStructure</code>
   class, which loops backwards through the list of structures accessible to
   the one on which it was called, trying to find one that <code>hasLabel()</code> the
   given <code>string</code>.  It returns the first one encountered, or null if there
   is none.</li>
</ul>
<p>The remainder of this section is efficiency improvements.  Consequently,
they can be deferred until later in the project, and can even be considered
optional if we notice no performance problems without implementing them.  If
you wish to skip them for now, simply jump to the last few tasks in this
section, about unit tests and documentation.</p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Extend the <code>Dependency</code> subclass of IS so that it marks all of its
   interpretation results with an attribute, flagging them as having come
   from a dependency.  Let us call such <code>OutputStructures</code> "fromdeps," and
   <code>OutputStructures</code> that are not so marked we will call "non-fromdeps."</li>
<li class="task-list-item"><input type="checkbox" disabled/> We will be creating a cache to speed up lookups into dependencies.
   To support this, create an LDE-global variable
   <code>LDE.dependencyLookupCache</code>, and initialize it to the empty object.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the <code>lookup(string)</code> routine so that any time it is called
   from a non-fromdep, and the result is either null or a fromdep, then we
   store in <code>LDE.dependencyLookupCache</code> the association of the given
   <code>string</code> as a key with the result (a fromdep or null) as the value.
   Future calls of <code>lookup()</code> from a non-fromdep can be sped up by, whenever
   their search first comes upon a fromdep, if there is a cached result
   (which can be null) for the <code>string</code> they're searching, just return that
   immediately.  This work is not yet correct without the next bullet point.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the <code>Dependency</code> subclass of IS so that, if it ever needs to
   actually reload content from the dependency, and thus possibly change the
   set of fromdeps it placed in the Output Tree, then it should also revert
   the value of <code>LDE.dependencyLookupCache</code> to the empty object.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Extend the unit tests to ensure that this works.  This can be done by
   defining a custom <code>hasLabel()</code> routine that records when it was called,
   and ensuring it is called only once for many lookups.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Once the unit tests pass, build everything and commit.</li>
</ul>
<h2 id="api-documentation">API Documentation</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Extend the <code>OutputStructure</code> page of the API Documentation to include
   all the work done in this phase.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Rebuild docs and commit.</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
