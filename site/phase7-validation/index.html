<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Phase 7, Validation - Lurch Deductive Engine Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Lurch Deductive Engine Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Design Plans <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../design-overview/">Overview</a>
</li>
                            
<li >
    <a href="../phase1-structures/">Phase 1, Structures</a>
</li>
                            
<li >
    <a href="../phase2-input-tree/">Phase 2, The Input Tree</a>
</li>
                            
<li >
    <a href="../phase3-output-tree/">Phase 3, The Output Tree</a>
</li>
                            
<li >
    <a href="../phase4-modification/">Phase 4, Modification</a>
</li>
                            
<li >
    <a href="../phase5-interpretation/">Phase 5, Interpretation</a>
</li>
                            
<li >
    <a href="../phase6-labels/">Phase 6, Labels</a>
</li>
                            
<li class="active">
    <a href="./">Phase 7, Validation</a>
</li>
                            
<li >
    <a href="../phase8-expressions-and-rules/">Phase 8, Expressions and Rules</a>
</li>
                            
<li >
    <a href="../enhancements/">Enhancements for Later</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../api-overview/">Overview</a>
</li>
                            
<li >
    <a href="../api-lde/">The LDE</a>
</li>
                            
<li >
    <a href="../api-structures/">Structures</a>
</li>
                            
<li >
    <a href="../api-input-structures/">Input Structures</a>
</li>
                            
<li >
    <a href="../api-output-structures/">Output Structures</a>
</li>
                            
<li >
    <a href="../api-phases/">Phases of processing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../phase6-labels/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../phase8-expressions-and-rules/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#lde-design-phase-7-validation">LDE Design Phase 7: Validation</a></li>
            <li><a href="#content">Content</a></li>
            <li><a href="#goal">Goal</a></li>
            <li><a href="#status">Status</a></li>
            <li><a href="#making-background-threads-easy-to-use">Making background threads easy to use</a></li>
            <li><a href="#the-validation-phase">The Validation Phase</a></li>
            <li><a href="#api-documentation">API Documentation</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p>We have designed the work on the Lurch Deductive Engine (LDE) to progress in
phases.  The idea is that each phase ends with a completed whole that can be
tested in that state, and that provides more features than the previous
state did.  By the time the final phase is complete, the LDE will be a
robust and useful product.</p>
<h1 id="lde-design-phase-7-validation">LDE Design Phase 7: Validation</h1>
<h2 id="content">Content</h2>
<p>In this phase, we define the Validation Phase.</p>
<h2 id="goal">Goal</h2>
<p>The LDE will be able to follow the Interpretation Phase with the Validation
Phase, giving semantic feedback about the validity of steps of work.</p>
<h2 id="status">Status</h2>
<p>This has not been implemented.  See the tasks below.</p>
<h2 id="making-background-threads-easy-to-use">Making background threads easy to use</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a worker script that enables us to create instances of
   <code>WebWorker</code>s who are able to respond to a variety of functions for
   installing various routines and data in the workers, including:<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked/> <code>worker.installScript(filename)</code></li>
<li class="task-list-item"><input type="checkbox" disabled checked/> <code>worker.installFunction(varname,func)</code></li>
<li class="task-list-item"><input type="checkbox" disabled checked/> <code>worker.installData(key,value)</code></li>
<li class="task-list-item"><input type="checkbox" disabled checked/> <code>worker.uninstallData(key)</code></li>
<li class="task-list-item"><input type="checkbox" disabled checked/> <code>worker.run(code,callback)</code></li>
<li class="task-list-item"><input type="checkbox" disabled checked/> <code>worker.reboot(callback)</code> (which calls <code>terminate()</code> in the
  internal <code>WebWorker</code> instance, then discards it and replaces it with
  a new one)</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a new unit testing file for these advanced <code>WebWorker</code>s,
   documenting it in the same style as the rest of the test suite.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Once it is robust and all tests pass, commit the changes.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a global variable in the LDE that holds a pool of these
   workers, with a function that lets you specify the size of the pool.
   It should initialize itself, by default, to the number of threads the
   CPU supports, minus 1 for the main thread.  (The minimum value is 1.)</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a function in each worker for marking it available or
   unavailable.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a function in the worker pool for getting the next available
   worker, or null if there isn't one.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Add and document tests for these new features.</li>
</ul>
<h2 id="the-validation-phase">The Validation Phase</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a global validation pool in the LDE, which is a priority queue
   that comes with a routine for adding an <code>OutputStructure</code> instance to the
   queue, together with a priority.  This routine does nothing if the
   structure in question does not have a <code>validate()</code> routine.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a dequeueing routine from that global validation pool that
   behaves as follows:<ul>
<li>If modification or interpretation is currently running, quit (do
  nothing).</li>
<li>If no worker is available, quit (do nothing).</li>
<li>If the global validation pool is empty, quit (do nothing).</li>
<li>Dequeue a structure from the validation pool and call its validation
  routine, passing it the next available worker and a callback that
  places the worker back on the list of available workers.
   We expect to define validation routines somewhat like this:</li>
</ul>
</li>
</ul>
<pre><code>MyOutputStructure.validate = function ( worker, callback ) {
    worker.installScript( &quot;some script file&quot; );
    worker.installFunction( &quot;foo&quot;, foo );
    worker.installData( &quot;key&quot;, value );
    worker.run( &quot;some code&quot;, function ( response ) {
        // here, generate feedback from response.result or response.error
        callback();
    } );
};
</code></pre>

<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked/> Call that dequeueing routine whenever a worker becomes available and
   whenever a new structure is added to the validation priority queue.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Extend the LDE's <code>reset()</code> function so that, in addition to what it
   does now, it empties the validation queue, reboots all ongoing workers,
   and returns them all as available again.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Make unit tests for this much functionality, in a new integration
   testing file for validation specifically.  Document such tests the way we
   document unit tests.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Extend the enqueue process so that if a structure is already
   enqueued, then enqueueing again does nothing.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Extend the enqueue process so that if the structure being enqueued,
   while not currently on the queue, has its validation routine still
   running in a worker, then we find and reboot that worker, mark the
   structure as no longer being validated, and <em>then</em> enqueue it as usual.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create unit tests that ensure these two new behaviors work.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Define a function in the <code>OutputStructure</code> class that uses citation
   lookup to find all the reasons and premises that the object cites, and
   return them as a dictionary.  Call this <code>lookUpAllCitations()</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Write unit tests for <code>OutputStructure::lookUpIn(label,accessibles)</code>
   and <code>Structure.lookUp(label)</code>, which accidentally escaped untested.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Add unit tests for <code>Structure.lookUpAllCitations()</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create a default implementation of <code>justChanged()</code> in the
   <code>OutputStructure</code> class that does the following things.<ul>
<li>If the OS has no validation routine, quit (do nothing).</li>
<li>If its origin IS has a validation priority of null, send feedback from
  it saying that its validation is being skipped, then quit (do no
  more).</li>
<li>Add the OS to the global pool, using the priority in its origin IS,
  or zero if there was none.</li>
<li>Send feedback about the OS saying its validation is being recomputed.</li>
<li>Call <code>lookUpAllCitations()</code> and store its result in a field of the
  <code>OutputStructure</code> instance.</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> When interpretation ends, loop through all nodes of the Output Tree
   and do this:<ul>
<li>If it is marked dirty, call <code>justChanged()</code> and stop.  Otherwise:</li>
<li>Recompute its <code>lookUpAllCitations()</code> dictionary, and if any part of it
  changed (in key or value) or any structure referenced by it is marked
  dirty, call <code>justChanged()</code>.</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Write unit tests to ensure that the already-tested validation
   features still function when they are automatically triggered at the end
   of the implementation phase.</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Add to the validation queue the feature of emitting feedback when the
   final worker is returned to be available again and there's nothing to
   dequeue and process.  Add tests or tweak old ones to listen for this
   signal at the end of validation and be sure it's emitted precisely once,
   at the correct time.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Add to the LDE the feature that it automatically triggers
   modification a short while after any change to the Input Tree, unless a
   new change comes in during that same "short while" and unless
   modification is manually run during that same "short while."  Add
   appropriate tests.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Write a new file of integration tests that test the full LDE stack of
   modification-interpretation-validation, including all the subtle types of
   situations that may arise, including changes to a premise impacting a
   conclusion's validation, changes to a label impacting whether something
   is cited, and on and on through many possibilities.</li>
</ul>
<h2 id="api-documentation">API Documentation</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Extend the processing phases page of the API Documentation to include
   all the work done in this phase, including validation.</li>
<li class="task-list-item"><input type="checkbox" disabled/> Rebuild docs and commit.</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
