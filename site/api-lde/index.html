<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>The LDE - Lurch Deductive Engine Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Lurch Deductive Engine Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Design Plans <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../design-overview/">Overview</a>
</li>
                            
<li >
    <a href="../phase1-structures/">Phase 1, Structures</a>
</li>
                            
<li >
    <a href="../phase2-validation/">Phase 2, Basic Validation</a>
</li>
                            
<li >
    <a href="../phase3-client/">Phase 3, The Client</a>
</li>
                            
<li >
    <a href="../phase4-dependencies/">Phase 4, Dependencies</a>
</li>
                            
<li >
    <a href="../phase5-background/">Phase 5, Background Queue</a>
</li>
                            
<li >
    <a href="../phase6-strings/">Phase 6, String Matching</a>
</li>
                            
<li >
    <a href="../phase7-theorems/">Phase 7, Theorems and Proofs</a>
</li>
                            
<li >
    <a href="../phase8-expressions/">Phase 8, Expression Trees</a>
</li>
                            
<li >
    <a href="../phase9-parsing/">Phase 9, Parsing Rules</a>
</li>
                            
<li >
    <a href="../phase10-declarations/">Phase 10, Declarations</a>
</li>
                            
<li >
    <a href="../phase11-features/">Phase 11, Bonus Features</a>
</li>
                            
<li >
    <a href="../enhancements/">Enhancements for Later</a>
</li>
                            
<li >
    <a href="../ideas/">Ideas Archive</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../api-overview/">Overview</a>
</li>
                            
<li class="active">
    <a href="./">The LDE</a>
</li>
                            
<li >
    <a href="../api-structures/">Structures</a>
</li>
                            
<li >
    <a href="../api-labels/">Labels</a>
</li>
                            
<li >
    <a href="../api-reasons/">Reasons</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../api-overview/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../api-structures/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#api-documentation-for-the-lde-module">API Documentation for the LDE Module</a></li>
            <li><a href="#one-global-document">One Global Document</a></li>
            <li><a href="#manipulating-the-document">Manipulating the Document</a></li>
            <li><a href="#asynchronous-api">Asynchronous API</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="api-documentation-for-the-lde-module">API Documentation for the LDE Module</h1>
<p>The main LDE module is not yet complete.  So far it supports only the
functionality documented below, which will grow with time.</p>
<h2 id="one-global-document">One Global Document</h2>
<p>The module initializes a single <code>Structure</code> instance in a global variable,
which can be queried with the public API function <code>getDocument()</code>.  It
begins life as a freshly created <code>Structure</code> with no attributes, but an ID.</p>
<p>This document is called the <em>LDE Document,</em> and is the structure on which
all computations done by the LDE will operate.  In the main Lurch
application, it will represent the meaningful content that has been
extracted from the user's document.</p>
<h2 id="manipulating-the-document">Manipulating the Document</h2>
<p>The document can be manipulated with four functions in the public API of
this module:</p>
<ul>
<li><code>insert(structureToInsert,parentID,insertionIndex)</code> inserts a new
   structure within the global document hierarchy, as follows:<ul>
<li><code>structureToInsert</code> should be the serialized form of the structure to
  insert (optionally created with <code>.toJSON()</code> in a <code>Structure</code>
  instance).  After the structure is deserialized and inserted into the
  document, <code>trackIDs()</code> will be called in it; for more information on
  that function, see <a href="./#unique-ids">its entry in the API docs</a>.</li>
<li><code>parentID</code> is the ID of the parent under which this new child should
  be inserted.  This must be a string ID that belongs to a structure
  already in the global document hierarchy.  Note that the root of the
  hierarchy is given the ID "root" at the time the module is loaded.</li>
<li><code>insertionIndex</code> is the index of the child to insert, which must be
  greater than or equal to zero and less than or equal to the number of
  children of the parent</li>
</ul>
</li>
<li><code>delete(ID)</code> deletes from the global document hierarchy the structure
   with the given ID, which is interpreted with the same conventions as the
   <code>parentID</code> is for the <code>insert</code> function.  After the structure is deleted,
   <code>untrackIDs()</code> will be called in it; for more information on that
   function, see <a href="./#unique-ids">its entry in the API docs</a>.</li>
<li><code>replace(ID,newStructure)</code> replaces the structure with the given ID with
   the given new structure.<ul>
<li><code>ID</code> is interpreted with the same conventions as the <code>parentID</code> is for
  the <code>insert</code> function</li>
<li><code>newStructure</code> is a serialized structure, as <code>structureToInsert</code> is
  for the <code>insert</code> function</li>
<li>After this operation, <code>untrackIDs()</code> will be called in the replaced
  structure and <code>trackIDs()</code> in the replacement; for more information
  on those functions, see
  <a href="./#unique-ids">their entries in the API docs</a>.</li>
</ul>
</li>
<li><code>setAttribute(ID,key,value)</code> modifies a single external attribute of a
   structure within the global document hierarchy, as follows:<ul>
<li><code>ID</code> is interpreted with the same conventions as the <code>parentID</code> is for
  the <code>insert</code> function</li>
<li><code>key</code> is the key of the external attribute to create or overwrite.  If
  this key happens to be "id", then the class-level tracking of IDs
  will be updated to repsect the change.</li>
<li><code>value</code> is the new value, which must be JSON data.  (No checks are
  done to verify that it is JSON data, but errors will transpire
  eventually if non-JSON data is passed.)</li>
</ul>
</li>
</ul>
<h2 id="asynchronous-api">Asynchronous API</h2>
<p>If the LDE detects that it is being run in a background thread, it will set
up listeners for messages from the parent thread.  These listeners will
handle messages of four types, <code>insert</code>/<code>delete</code>/<code>replace</code>/<code>setAttribute</code>,
mirroring the four functions given above, and calling them internally.</p>
<p>They can be called by passing a message of the form <code>[ command, args... ]</code>,
where the command is a string (one of <code>"insert"</code>, <code>"delete"</code>, etc.) and the
arguments list is the same list that would be passed to the function itself,
as documented in the previous section on this page.</p>
<p>For example, you could start an LDE in a WebWorker and insert a new
structure as the first child of its global document as follows.</p>
<pre><code class="js">    // import the lde.js file (kept in the release/ folder)
    // (This requires having the structure.js file in the same folder.)
    var worker = new Worker( 'lde.js' );
    var A = new Structure();
    worker.postMessage( [ 'insert', A.toJSON(), 'root', 0 ] );
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
